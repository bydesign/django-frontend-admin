<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <link href="js/codemirror/lib/codemirror.css" rel="stylesheet" />
  <link href="js/codemirror/theme/duotone-light.css" rel="stylesheet" />
  <title>Django Frontend Admin</title>

<style>
.FE {
  position:fixed;
  top:0;
  right:0;
  background-color:#ccc;
  color:#fff;
  padding:.6em .3em;
  font-size:.8em;
}
</style>

</head>
<body>

<button id="replace">Go!</button>

<template id="childTemplate">

{% extends "baseTemplate" %}

{% block 'header' %}
<nav>
  <a href="#">Nav item</a>
  <a href="#">Nav item</a>
  <a href="#">Nav item</a>
  <a href="#">Nav item</a>
</nav>
{% block extraHeader %}<p>extra header block</p>{% endblock %}
{% endblock %}

{% block 'footer' %}
<div>Copyright information and other random <b>{{ footerCode }}</b>.</div>
{% endblock %}

{{ finalvariable }} final text</template>

<template id="includeTemplate">

<p>This paragraph has {{ not }} been included via the include template tag.</p>

</template>

<div id="frontendEditor" class="FE">frontend editor test</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="js/codemirror/codemirror.min.js"></script>
<script src="js/codemirror/addon/mode/overlay.js"></script>
<script src="js/codemirror/mode/django/django.js"></script>
<script>
var TEMPLATES = [
  {
    name: 'baseTemplate',
    content: "<!doctype html><html><head><title>Replaced Django Frontend Admin</title></head><body><h1>Title goes here.</h1>{% block 'header' %}{% endblock %}<p></p>{% block 'footer' %}{% endblock %}</body></html>"
  },
  {
    name: 'childTemplate',
    content: $(childTemplate).html(),
    start: true
  },
  {
    name: 'includeTemplate',
    content: $(includeTemplate).html()
  },
]
</script>
<script src="js/builtin_tags.js"></script>
<script src="js/parser.js"></script>
<script src="js/processor.js"></script>
<script src="js/default.js"></script>
<script>
var FA = new FrontAdmin();
FA.registerTags(BUILTIN_TAGS);
FA.process(TEMPLATES);
FA.render({
  not: 'definitely (resolved)',
  footerCode: 'footer code value (resolved)',
  finalvariable: 'my last words (resolved)'
});

$('body').append('<textarea id="myTextarea"></textarea>');
var editor = CodeMirror.fromTextArea(myTextarea, {
  lineNumbers: true,
  value: FA.template.content,
  theme: 'duotone-light',
  mode: 'django'
});

</script>

</body>
</html>
